webpackJsonp([1],{"0msI":function(t,e){},"1uuo":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("mvHQ"),i=n.n(s),r={name:"app",data:function(){return{colors:["#fef4ac","#0018ba","#ffc200","#f32f15","#cccccc","#5ab639"],brushs:[{className:"small fa fa-paint-brush",lineWidth:3},{className:"middle fa fa-paint-brush",lineWidth:6},{className:"big fa fa-paint-brush",lineWidth:12}],context:{},imgUrl:[],sendAry:[],singalAry:[],canvasMoveUse:!0,express:"",preDrawAry:[],nextDrawAry:[],middleAry:[],config:{lineWidth:1,lineColor:"#f2849e",shadowBlur:2}}},created:function(){this.$emit("setNav","在线涂鸦画板")},mounted:function(){var t=document.querySelector("#canvas");this.context=t.getContext("2d"),this.initDraw(),this.setCanvasStyle(),document.querySelector("#footer").classList.add("hide-footer"),document.querySelector("body").classList.add("fix-body")},destroyed:function(){document.querySelector("#footer").classList.remove("hide-footer"),document.querySelector("body").classList.remove("fix-body")},computed:{controls:function(){return[{title:"上一步",action:"prev",className:this.preDrawAry.length?"active fa fa-reply":"fa fa-reply"},{title:"下一步",action:"next",className:this.nextDrawAry.length?"active fa fa-share":"fa fa-share"},{title:"清除",action:"clear",className:this.preDrawAry.length||this.nextDrawAry.length?"active fa fa-trash":"fa fa-trash"}]}},methods:{isPc:function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,a=0;a<e.length;a++)if(t.indexOf(e[a])>0){n=!1;break}return n},removeImg:function(t){this.imgUrl=this.imgUrl.filter(function(e){return e!==t})},initDraw:function(){var t=this.context.getImageData(0,0,600,400);this.middleAry.push(t)},canvasMove:function(t){if(this.canvasMoveUse){console.log("canvasMove");var e=t.target,n=void 0,a=void 0;this.isPc()?(n=t.clientX-e.parentNode.offsetLeft,a=t.clientY-e.parentNode.offsetTop):(n=t.changedTouches[0].clientX-e.parentNode.offsetLeft,a=t.changedTouches[0].clientY-e.parentNode.offsetTop),this.singalAry.push([n,a]),this.context.lineTo(n,a),this.context.stroke()}},beginPath:function(t){var e=document.querySelector("#canvas");t.target!==e&&(console.log("beginPath"),this.context.beginPath())},canvasUp:function(t){console.log("canvasUp");var e=this.context.getImageData(0,0,600,400);this.sendAry.push(this.singalAry),console.log(i()(this.sendAry)),this.singalAry=[],this.nextDrawAry.length?(this.middleAry=[],this.middleAry=this.middleAry.concat(this.preDrawAry),this.middleAry.push(e),this.nextDrawAry=[]):this.middleAry.push(e),this.canvasMoveUse=!1},canvasDown:function(t){console.log("canvasDown"),this.canvasMoveUse=!0;var e=t.clientX-t.target.parentNode.offsetLeft,n=t.clientY-t.target.parentNode.offsetTop;this.setCanvasStyle(),this.context.beginPath(),this.context.moveTo(e,n),this.singalAry.push([e,n]),console.log("moveTo",e,n);var a=this.context.getImageData(0,0,600,400);this.preDrawAry.push(a)},setColor:function(t){this.config.lineColor=t},setBrush:function(t){this.config.lineWidth=t},controlCanvas:function(t){switch(t){case"prev":if(this.preDrawAry.length){var e=this.preDrawAry.pop(),n=this.middleAry[this.preDrawAry.length+1];this.nextDrawAry.push(n),this.context.putImageData(e,0,0)}break;case"next":if(this.nextDrawAry.length){var a=this.nextDrawAry.pop(),s=this.middleAry[this.middleAry.length-this.nextDrawAry.length-2];this.preDrawAry.push(s),this.context.putImageData(a,0,0)}break;case"clear":this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.preDrawAry=[],this.nextDrawAry=[],this.middleAry=[this.middleAry[0]]}},getImage:function(){var t=this;this.$http({method:"post",url:"https://www.cherryhuang.cn:8088/getlatex",data:{strokes:i()(this.sendAry)}}).then(function(e){t.express=e.data}).catch(function(t){console.log(t)})},setCanvasStyle:function(){this.context.lineWidth=this.config.lineWidth,this.context.shadowBlur=this.config.shadowBlur,this.context.shadowColor=this.config.lineColor,this.context.strokeStyle=this.config.lineColor}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inner draw",on:{mousemove:function(e){t.beginPath(e)}}},[n("div",{staticClass:"wrap"},[n("canvas",{staticClass:"fl",attrs:{id:"canvas",width:"300",height:"200"},on:{mousedown:function(e){t.canvasDown(e)},mouseup:function(e){t.canvasUp(e)},mousemove:function(e){t.canvasMove(e)},touchstart:function(e){t.canvasDown(e)},touchend:function(e){t.canvasUp(e)},touchmove:function(e){t.canvasMove(e)}}}),t._v(" "),n("div",[t._v(t._s(t.express))]),t._v(" "),n("div",{staticClass:"fl",attrs:{id:"control"}},[n("div",{attrs:{id:"canvas-color"}},[n("h5",[t._v("\n          画笔颜色")]),t._v(" "),n("ul",t._l(t.colors,function(e){return n("li",{class:{active:t.config.lineColor===e},style:{background:e},on:{click:function(n){t.setColor(e)}}})}))]),t._v(" "),n("div",{attrs:{id:"canvas-brush"}},[n("h5",[t._v("画笔大小")]),t._v(" "),t._l(t.brushs,function(e){return n("span",{class:[e.className,{active:t.config.lineWidth===e.lineWidth}],on:{click:function(n){t.setBrush(e.lineWidth)}}})})],2),t._v(" "),n("div",{attrs:{id:"canvas-control"}},[n("h5",[t._v("操作")]),t._v(" "),t._l(t.controls,function(e){return n("span",{class:e.className,attrs:{title:e.title},on:{click:function(n){t.controlCanvas(e.action)}}})})],2),t._v(" "),n("div",{attrs:{id:"canvas-drawImage"}},[n("h5",[t._v("生成图像")]),t._v(" "),n("button",{staticClass:"drawImage",on:{click:function(e){t.getImage()}}},[t._v("预览")])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl.length,expression:"imgUrl.length"}],attrs:{id:"img-box"}},t._l(t.imgUrl,function(e){return n("div",{staticClass:"img-item"},[n("img",{attrs:{src:e}}),t._v(" "),n("span",{staticClass:"fa fa-close",on:{click:function(n){t.removeImg(e)}}})])}))])},staticRenderFns:[]};var c=n("VU/8")(r,o,!1,function(t){n("0msI")},null,null).exports,l=n("/ocq"),h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var u=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},h,!1,function(t){n("1uuo")},"data-v-d8ec41bc",null).exports;a.a.use(l.a);var v=new l.a({routes:[{path:"/",name:"HelloWorld",component:u}]}),f=n("mtWM"),d=n.n(f);a.a.prototype.$http=d.a,a.a.config.productionTip=!1,new a.a({el:"#app",router:v,components:{App:c},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.7544af3c777bdde1154e.js.map